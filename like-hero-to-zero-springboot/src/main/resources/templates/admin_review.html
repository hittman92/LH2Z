<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Review – Pending</title>
    <style>
      body { font-family: system-ui, Arial, sans-serif; margin: 20px; }
      table { border-collapse: collapse; width: 100%; }
      th, td { border: 1px solid #ddd; padding: 8px; }
      th { background: #f5f5f5; text-align: left; }
      form { display: inline; }
      .pager a, .pager span { margin: 0 6px; }
    </style>
  </head>
  <body>
    <h1>Freigabe (Pending)</h1>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>ISO3</th>
          <th>Jahr</th>
          <th>CO₂ (kt)</th>
          <th>Quelle</th>
          <th>Aktion</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="r : ${page.content}">
          <td th:text="${r.id}">1</td>
          <td th:text="${r.country.id}">DEU</td>
          <td th:text="${r.year}">2024</td>
          <td th:text="${r.valueKt}">0</td>
          <td th:text="${r.source}">WorldBank</td>
          <td>
            <!-- Eintrag genehmigen -->
            <form th:action="@{'/admin/emissions/' + ${r.id} + '/approve'}" method="post">
              <input type="hidden" th:if="${_csrf != null}"
                     th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
              <input type="hidden" name="page" th:value="${page.number}"/>
              <input type="hidden" name="size" th:value="${page.size}"/>
              <button type="submit">Freigeben</button>
            </form>
            <!-- Eintrag ablehnen -->
            <form th:action="@{'/admin/emissions/' + ${r.id} + '/reject'}" method="post">
              <input type="hidden" th:if="${_csrf != null}"
                     th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
              <input type="hidden" name="page" th:value="${page.number}"/>
              <input type="hidden" name="size" th:value="${page.size}"/>
              <button type="submit">Ablehnen</button>
            </form>
          </td>
        </tr>
      </tbody>
    </table>

    <p class="pager">
      <a th:href="@{|/admin/review?page=0|}">« Erste</a> |
      <a th:if="${page.hasPrevious()}"
         th:href="@{|/admin/review?page=${page.number-1}|}">Zurück</a>
      <span th:unless="${page.hasPrevious()}">Zurück</span> |
      <a th:if="${page.hasNext()}"
         th:href="@{|/admin/review?page=${page.number+1}|}">Weiter</a>
      <span th:unless="${page.hasNext()}">Weiter</span>
    </p>

    <p><a href="/">Zurück zur Startseite</a></p>
  </body>
</html>
